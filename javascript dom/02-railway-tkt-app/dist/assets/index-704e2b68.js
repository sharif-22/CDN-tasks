(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&t(p)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}})();const h=document.forms.ticketForm,b=document.querySelector("#addPassengers"),y=document.querySelector("#passengerList");document.querySelectorAll(".passenger");b.addEventListener("click",s=>{s.preventDefault();let e=[],i=[];[...h].forEach(r=>{r.type==="radio"&&(r.checked?(e.push(r.checked),i.push(r),r.closest(".gender-div").children[1].innerText=""):(r.closest(".gender-div").children[1].innerText="Please Select Gender",f("red",r.parentElement.parentElement)))}),i.forEach(r=>{r.checked&&E(r.closest(".gender-div").children[1],r.parentElement.parentElement)});let t=y.children.length+1;if(e[t]==!0||e[t-2]==!0){const r=document.createElement("div"),n=document.createElement("hr");n.classList.add("my-3");const c=o(t,`passenger${t}Name`,"text",`Enter passenger ${t} Name`,`Enter passenger ${t} Name`),m=["Male","Female","Others"],g=o(t,`passenger${t}Age`,"number",`Enter passenger ${t} Age`,`Enter passenger ${t} Age`);t<6?(r.append(c,a(m,t),g,n),y.append(r)):b.nextElementSibling.textContent="You can add upto 5 Passenegrs only "}function o(r,n,c,m,g){const d=document.createElement("div"),u=document.createElement("label"),l=document.createElement("input"),A=document.createElement("small");return d.classList.add("flex","flex-col","gap-3","mt-2"),l.classList.add("passenger","p-2"),c=="number"&&n==`passenger${r}Age`&&(l.setAttribute("min",1),l.setAttribute("max",110)),u.setAttribute("for",n),l.setAttribute("type",c),l.setAttribute("id",n),l.setAttribute("name",n),l.setAttribute("placeholder",g),l.setAttribute("required","required"),u.innerText=m,d.append(u,l,A),d}function a(r,n){const c=document.createElement("div"),m=document.createElement("div"),g=document.createElement("small");c.classList.add("gender-div","space-y-2","mt-2"),m.classList.add("radio-collection","flex","justify-between","p-3");for(let d=0;d<r.length;d++)m.appendChild(p(n,r[d],r[d],r[d]));return c.append(m,g),c}function p(r,n,c,m){let g=`passenger${r}Gender`;var d=document.createElement("div"),u=document.createElement("input");u.setAttribute("type","radio"),u.setAttribute("name",g),u.setAttribute("id",`${n.toLowerCase()}${r}`),u.setAttribute("value",c.toLowerCase()),u.setAttribute("required","required"),u.style.margin="6px";var l=document.createElement("label");return l.setAttribute("for",`${n.toLowerCase()}${r}`),l.textContent=m,d.append(u,l),d}});h.addEventListener("submit",s=>{s.preventDefault();const e=new FormData(h),i=Object.fromEntries(e),t=[];for(let n=0;n<=5;n++)i[`passenger${n}Age`]&&i[`passenger${n}Gender`]&&i[`passenger${n}Name`]&&t.push({passengerAge:i[`passenger${n}Age`],passengerGender:i[`passenger${n}Gender`],passengerName:i[`passenger${n}Name`]});const a={trainNum:i.trainNum,toStation:i.toStation,fromStation:i.fromStation,dateOfJourney:i.dateOfJourney,passengersDetails:t};if(console.log(a),(async(n,c)=>{await fetch(c,{method:"post",headers:{"Content-Type":"application/json"},body:n})})(a,"http://localhost:3000/tickets"),h.reset(),$(),y.children.length>1)for(let n=y.children.length;n>1;n--)y.children[n-1].remove()});h.addEventListener("change",s=>{const e=s.target,t=e.parentElement.querySelector("small");if(e.type=="text")v(e.value)?(E(t,e),L(e.value)?E(t,e):(f("red",e),t.innerText="Entered Value is  not Valid!")):(f("red",e),e.value="",e.placeholder="input cannot be blank.",t.innerText="input cannot be blank.");else if(e.type=="number")e.id=="trainNum"&&x(e.value,1e3,99999)||e.id!="trainNum"&&x(e.value,5,110)?E(t,e):(f("red",e),t.innerText="Entered Value is  not Valid!");else if(e.type=="date")v(e.value)?f("green",e):(f("red",e),t.innerText="Entered data is  not Valid!");else if(e.type=="radio"){let o=[],a=[];e.checked&&(o.push(e.checked),a.push(e)),a.forEach(p=>{p.checked&&(p.closest(".gender-div").children[1].innerText="",f("green",p.parentElement.parentElement))})}});const v=s=>s.trim()!=="",L=s=>!(s.length<3),x=(s,e,i)=>!(s<e||s>i);function f(s,e){e.style.borderColor=s,e.style.borderWidth="2px"}function $(){[...h].forEach(s=>{s.type=="radio"&&(s.parentElement.parentElement.style.borderColor="none",s.parentElement.parentElement.style.borderWidth="0px"),s.style.borderColor="none",s.style.borderWidth="0px"})}function E(s,e){f("green",e),s.innerText=""}
