(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}})();const E=document.forms.ticketForm,A=document.querySelector("#addPassengers"),h=document.querySelector("#passengerList");document.querySelectorAll(".passenger");A.addEventListener("click",s=>{s.preventDefault();let e=[],a=[];[...E].forEach(t=>{t.type==="radio"&&(t.checked?(e.push(t.checked),a.push(t),console.log(a)):c("red",t.parentElement.parentElement))}),a.forEach(t=>{t.parentElement.parentElement.style.borderColor="none",t.parentElement.parentElement.style.borderWidth="0px",console.log(t.checked),t.checked&&c("green",t.parentElement.parentElement),a.length<1&&(t.parentElement.parentElement.style.borderColor="none",t.parentElement.parentElement.style.borderWidth="0px")});let n=h.children.length+1;if(e[n]==!0||e[n-2]==!0){const t=document.createElement("div"),r=o(n,`passenger${n}Name`,"text",`Enter passenger ${n} Name`,`Enter passenger ${n} Name`),p=["Male","Female","Others"],f=o(n,`passenger${n}Age`,"number",`Enter passenger ${n} Age`,`Enter passenger ${n} Age`);n<6?(t.append(r,l(p,n),f),h.append(t)):console.log("tickes solds upto 5 members only ")}function o(t,r,p,f,g){const d=document.createElement("div"),u=document.createElement("label"),i=document.createElement("input"),v=document.createElement("small");return d.classList.add("flex","flex-col","gap-3"),i.classList.add("passenger","p-2"),p=="number"&&r==`passenger${t}Age`&&(i.setAttribute("min",0),i.setAttribute("max",110)),u.setAttribute("for",r),i.setAttribute("type",p),i.setAttribute("id",r),i.setAttribute("name",r),i.setAttribute("placeholder",g),i.setAttribute("required","required"),u.innerText=f,d.append(u,i,v),d}function l(t,r){const p=document.createElement("div"),f=document.createElement("div"),g=document.createElement("small");f.classList.add("flex","justify-between","p-3");for(let d=0;d<t.length;d++)f.appendChild(m(r,t[d],t[d],t[d]));return p.append(f,g),p}function m(t,r,p,f){let g=`passenger${t}Gender`;var d=document.createElement("div"),u=document.createElement("input");u.setAttribute("type","radio"),u.setAttribute("name",g),u.setAttribute("id",`${r.toLowerCase()}${t}`),u.setAttribute("value",p.toLowerCase()),u.setAttribute("required","required"),u.style.margin="6px";var i=document.createElement("label");return i.setAttribute("for",`${r.toLowerCase()}${t}`),i.textContent=f,d.append(u,i),d}});E.addEventListener("submit",s=>{s.preventDefault();const e=new FormData(E),a=Object.fromEntries(e),n=[];for(let r=0;r<=5;r++)a[`passenger${r}Age`]&&a[`passenger${r}Gender`]&&a[`passenger${r}Name`]&&n.push({passengerAge:a[`passenger${r}Age`],passengerGender:a[`passenger${r}Gender`],passengerName:a[`passenger${r}Name`]});const l={trainNum:a.trainNum,toStation:a.toStation,fromStation:a.fromStation,dateOfJourney:a.dateOfJourney,passengersDetails:n};console.log(l),(async(r,p)=>{await fetch(p,{method:"post",headers:{"Content-Type":"application/json"},body:r})})(l,"http://localhost:3000/tickets"),E.reset(),$()});E.addEventListener("change",s=>{const e=s.target,n=e.parentElement.querySelector("small");if(e.type=="text")b(e.value)?(n.innerText="",c("green",e),x(e.value)?(c("green",e),n.innerText=""):(c("red",e),n.innerText="Enter Value is  not Valid!")):(c("red",e),e.value="",e.placeholder="input cannot be blank.",n.innerText="input cannot be blank.");else if(e.type=="number")e.id=="trainNum"&&y(e.value,1e3,99999)?(console.log(e.id),c("green",e)):e.id!="trainNum"&&y(e.value,1,110)?c("green",e):c("red",e);else if(e.type=="date")b(e.value)?c("green",e):c("red",e);else if(e.type=="radio"){let o=[],l=[];e.checked?(o.push(e.checked),l.push(e)):c("red",e.parentElement.parentElement),l.forEach(m=>{m.checked&&c("green",m.parentElement.parentElement)})}});const b=s=>s.trim()!=="",x=s=>!(s.length<3),y=(s,e,a)=>!(s<e||s>a);function c(s,e){e.style.borderColor=s,e.style.borderWidth="2px"}function $(){[...E].forEach(s=>{s.type=="radio"&&(s.parentElement.parentElement.style.borderColor="none",s.parentElement.parentElement.style.borderWidth="0px"),s.style.borderColor="none",s.style.borderWidth="0px"})}
