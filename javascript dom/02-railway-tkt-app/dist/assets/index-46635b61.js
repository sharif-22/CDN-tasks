(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&t(p)}).observe(document,{childList:!0,subtree:!0});function i(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(a){if(a.ep)return;a.ep=!0;const o=i(a);fetch(a.href,o)}})();const E=document.forms.ticketForm,y=document.querySelector("#addPassengers"),b=document.querySelector("#passengerList");document.querySelectorAll(".passenger");y.addEventListener("click",r=>{r.preventDefault();let e=[],i=[];[...E].forEach(n=>{n.type==="radio"&&(n.checked?(e.push(n.checked),i.push(n),n.closest(".gender-div").children[1].innerText=""):(n.closest(".gender-div").children[1].innerText="Please Select Gender",f("red",n.parentElement.parentElement)))}),i.forEach(n=>{n.checked&&h(n.closest(".gender-div").children[1],n.parentElement.parentElement)});let t=b.children.length+1;if(e[t]==!0||e[t-2]==!0){const n=document.createElement("div"),s=document.createElement("hr");s.classList.add("my-3");const c=a(t,`passenger${t}Name`,"text",`Enter passenger ${t} Name`,`Enter passenger ${t} Name`),m=["Male","Female","Others"],g=a(t,`passenger${t}Age`,"number",`Enter passenger ${t} Age`,`Enter passenger ${t} Age`);t<6?(n.append(c,o(m,t),g,s),b.append(n)):y.nextElementSibling.textContent="You can add upto 5 Passenegrs only "}function a(n,s,c,m,g){const d=document.createElement("div"),u=document.createElement("label"),l=document.createElement("input"),A=document.createElement("small");return d.classList.add("flex","flex-col","gap-3","mt-2"),l.classList.add("passenger","p-2"),c=="number"&&s==`passenger${n}Age`&&(l.setAttribute("min",1),l.setAttribute("max",110)),u.setAttribute("for",s),l.setAttribute("type",c),l.setAttribute("id",s),l.setAttribute("name",s),l.setAttribute("placeholder",g),l.setAttribute("required","required"),u.innerText=m,d.append(u,l,A),d}function o(n,s){const c=document.createElement("div"),m=document.createElement("div"),g=document.createElement("small");c.classList.add("gender-div","space-y-2","mt-2"),m.classList.add("radio-collection","flex","justify-between","p-3");for(let d=0;d<n.length;d++)m.appendChild(p(s,n[d],n[d],n[d]));return c.append(m,g),c}function p(n,s,c,m){let g=`passenger${n}Gender`;var d=document.createElement("div"),u=document.createElement("input");u.setAttribute("type","radio"),u.setAttribute("name",g),u.setAttribute("id",`${s.toLowerCase()}${n}`),u.setAttribute("value",c.toLowerCase()),u.setAttribute("required","required"),u.style.margin="6px";var l=document.createElement("label");return l.setAttribute("for",`${s.toLowerCase()}${n}`),l.textContent=m,d.append(u,l),d}});E.addEventListener("submit",r=>{r.preventDefault();const e=new FormData(E),i=Object.fromEntries(e),t=[];for(let s=0;s<=5;s++)i[`passenger${s}Age`]&&i[`passenger${s}Gender`]&&i[`passenger${s}Name`]&&t.push({passengerAge:i[`passenger${s}Age`],passengerGender:i[`passenger${s}Gender`],passengerName:i[`passenger${s}Name`]});const o={trainNum:i.trainNum,toStation:i.toStation,fromStation:i.fromStation,dateOfJourney:i.dateOfJourney,passengersDetails:t};console.log(o),(async(s,c)=>{await fetch(c,{method:"post",headers:{"Content-Type":"application/json"},body:s})})(o,"http://localhost:3000/tickets"),E.reset(),$()});E.addEventListener("change",r=>{const e=r.target,t=e.parentElement.querySelector("small");if(e.type=="text")v(e.value)?(h(t,e),L(e.value)?h(t,e):(f("red",e),t.innerText="Entered Value is  not Valid!")):(f("red",e),e.value="",e.placeholder="input cannot be blank.",t.innerText="input cannot be blank.");else if(e.type=="number")e.id=="trainNum"&&x(e.value,1e3,99999)||e.id!="trainNum"&&x(e.value,5,110)?h(t,e):(f("red",e),t.innerText="Entered Value is  not Valid!");else if(e.type=="date")v(e.value)?f("green",e):(f("red",e),t.innerText="Entered data is  not Valid!");else if(e.type=="radio"){let a=[],o=[];e.checked&&(a.push(e.checked),o.push(e)),o.forEach(p=>{p.checked&&(p.closest(".gender-div").children[1].innerText="",f("green",p.parentElement.parentElement))})}});const v=r=>r.trim()!=="",L=r=>!(r.length<3),x=(r,e,i)=>!(r<e||r>i);function f(r,e){e.style.borderColor=r,e.style.borderWidth="2px"}function $(){[...E].forEach(r=>{r.type=="radio"&&(r.parentElement.parentElement.style.borderColor="none",r.parentElement.parentElement.style.borderWidth="0px"),r.style.borderColor="none",r.style.borderWidth="0px"})}function h(r,e){f("green",e),r.innerText=""}
