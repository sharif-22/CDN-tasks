(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const E of i.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&t(E)}).observe(document,{childList:!0,subtree:!0});function o(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(a){if(a.ep)return;a.ep=!0;const i=o(a);fetch(a.href,i)}})();const h=document.forms.ticketForm,x=document.querySelector("#addPassengers"),$=document.querySelector("#bookTicket"),y=document.querySelector("#passengerList"),k=document.querySelector("#popUp"),N=document.querySelector("#close"),S=document.querySelector("#form");document.querySelectorAll(".passenger");x.addEventListener("click",n=>{n.preventDefault(),L(h);let e=[],o=[];[...h].forEach(s=>{s.type==="radio"&&(s.checked?(e.push(s.checked),o.push(s),s.closest(".gender-div").children[1].innerText=""):(s.closest(".gender-div").children[1].innerText="Please Select Gender",l("red",s.parentElement.parentElement)))}),o.forEach(s=>{s.checked&&f(s.closest(".gender-div").children[1],s.parentElement.parentElement)});let t=y.children.length+1;if(e[t]==!0||e[t-2]==!0){const s=document.createElement("div"),r=document.createElement("hr");r.classList.add("my-3");const d=a(t,`passenger${t}Name`,"text",`Enter passenger ${t} Name`,`Enter passenger ${t} Name`),m=["Male","Female","Others"],g=a(t,`passenger${t}Age`,"number",`Enter passenger ${t} Age`,`Enter passenger ${t} Age`);t<6?(s.append(d,i(m,t),g,r),y.append(s)):(x.nextElementSibling.textContent="You can add upto 5 Passenegrs only ",setTimeout(()=>{x.nextElementSibling.textContent=""},3e3))}function a(s,r,d,m,g){const u=document.createElement("div"),p=document.createElement("label"),c=document.createElement("input"),T=document.createElement("small");return u.classList.add("flex","flex-col","gap-3","mt-2"),c.classList.add("passenger","p-2"),d=="number"&&r==`passenger${s}Age`&&(c.setAttribute("min",1),c.setAttribute("max",110)),p.setAttribute("for",r),c.setAttribute("type",d),c.setAttribute("id",r),c.setAttribute("name",r),c.setAttribute("placeholder",g),c.setAttribute("required","required"),p.innerText=m,u.append(p,c,T),u}function i(s,r){const d=document.createElement("div"),m=document.createElement("div"),g=document.createElement("small");d.classList.add("gender-div","space-y-2","mt-2"),m.classList.add("radio-collection","flex","justify-between","p-3");for(let u=0;u<s.length;u++)m.appendChild(E(r,s[u],s[u],s[u]));return d.append(m,g),d}function E(s,r,d,m){let g=`passenger${s}Gender`;var u=document.createElement("div"),p=document.createElement("input");p.setAttribute("type","radio"),p.setAttribute("name",g),p.setAttribute("id",`${r.toLowerCase()}${s}`),p.setAttribute("value",d.toLowerCase()),p.setAttribute("required","required"),p.style.margin="6px";var c=document.createElement("label");return c.setAttribute("for",`${r.toLowerCase()}${s}`),c.textContent=m,u.append(p,c),u}});$.addEventListener("click",n=>{L(h);let e=[],o=[];[...h].forEach(t=>{t.type==="radio"&&(t.checked?(e.push(t.checked),o.push(t),t.closest(".gender-div").children[1].innerText=""):(t.closest(".gender-div").children[1].innerText="Please Select Gender",l("red",t.parentElement.parentElement)))}),o.forEach(t=>{t.checked&&f(t.closest(".gender-div").children[1],t.parentElement.parentElement)})});h.addEventListener("submit",n=>{n.preventDefault();const e=new FormData(h),o=Object.fromEntries(e),t=[];for(let r=0;r<=5;r++)o[`passenger${r}Age`]&&o[`passenger${r}Gender`]&&o[`passenger${r}Name`]&&t.push({passengerAge:o[`passenger${r}Age`],passengerGender:o[`passenger${r}Gender`],passengerName:o[`passenger${r}Name`]});const a={trainNum:o.trainNum,toStation:o.toStation,fromStation:o.fromStation,dateOfJourney:o.dateOfJourney,passengersDetails:t},i=JSON.stringify(a);if(console.log(i),(async(r,d)=>{await fetch(d,{method:"post",headers:{"Content-Type":"application/json"},body:r})})(i,"http://localhost:3000/tickets"),h.reset(),q(),y.children.length>1)for(let r=y.children.length;r>1;r--)y.children[r-1].remove();S.style.display="none",k.style.display="block"});h.addEventListener("change",n=>{const e=n.target,t=e.parentElement.querySelector("small");if(e.type=="text")b(e.value)?(f(t,e),A(e.value)?f(t,e):(l("red",e),t.innerText="Entered Value is  not Valid!")):(l("red",e),e.value="",e.placeholder="input cannot be blank.",t.innerText="input cannot be blank.");else if(e.type=="number")e.id=="trainNum"&&v(e.value,1e3,99999)||e.id!="trainNum"&&v(e.value,5,110)?f(t,e):(l("red",e),t.innerText="Entered Value is  not Valid!");else if(e.type=="date")b(e.value)?(l("green",e),f(t,e)):(l("red",e),t.innerText="Entered data is  not Valid!");else if(e.type=="radio"){let a=[],i=[];e.checked&&(a.push(e.checked),i.push(e)),i.forEach(E=>{E.checked&&(E.closest(".gender-div").children[1].innerText="",l("green",E.parentElement.parentElement))})}});N.addEventListener("click",()=>{S.style.display="block",k.style.display="none"});const b=n=>n.trim()!=="",A=n=>!(n.length<3),v=(n,e,o)=>!(n<e||n>o);function l(n,e){e.style.borderColor=n,e.style.borderWidth="2px"}function q(){[...h].forEach(n=>{n.type=="radio"&&(n.parentElement.parentElement.style.borderColor="none",n.parentElement.parentElement.style.borderWidth="0px"),n.style.borderColor="none",n.style.borderWidth="0px"})}function f(n,e){n.innerText="",l("green",e)}function L(n){[...n].forEach(e=>{const t=e.parentElement.querySelector("small");e.type=="text"?b(e.value)?(f(t,e),A(e.value)?f(t,e):(l("red",e),t.innerText="Entered Value is  not Valid!")):(l("red",e),e.value="",e.placeholder="input cannot be blank.",t.innerText="input cannot be blank."):e.type=="number"?e.id=="trainNum"&&v(e.value,1e3,99999)||e.id!="trainNum"&&v(e.value,5,110)?f(t,e):(l("red",e),t.innerText="Entered Value is  not Valid!"):e.type=="date"&&(b(e.value)?l("green",e):(l("red",e),t.innerText="Entered data is  not Valid!"))})}
