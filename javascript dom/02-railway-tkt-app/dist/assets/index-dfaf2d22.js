(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const t of e.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&h(t)}).observe(document,{childList:!0,subtree:!0});function y(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function h(n){if(n.ep)return;n.ep=!0;const e=y(n);fetch(n.href,e)}})();document.addEventListener("DOMContentLoaded",()=>{const f=document.forms.ticketForm,g=document.querySelector("#addPassengers"),y=document.querySelector("#passengerList");document.querySelectorAll(".passenger"),g.addEventListener("click",e=>{e.preventDefault();let t=y.children.length+1;const s=document.createElement("div"),u=A(t,`passenr ${t} Name`,"text",`Enter passenger ${t} Name`),l=["Male","Female","Others"],m=A(t,`passenger ${t} Age`,"number",`Enter passenger ${t} Age`);t<6?s.append(u,v(l,t),m):console.log("tickes solds upto 5 members only "),y.append(s);function A(o,c,d,b){const i=document.createElement("div"),p=document.createElement("label"),r=document.createElement("input"),E=document.createElement("small");return i.classList.add("flex","flex-col","gap-3"),r.classList.add("passenger","p-2"),d=="number"&&c==`passenger${o}Age`&&(r.setAttribute("min",0),r.setAttribute("max",110)),p.setAttribute("for",c),r.setAttribute("type",d),r.setAttribute("id",c),r.setAttribute("name",c),r.setAttribute("placeholder",`Enter Passenger ${o} Age `),r.setAttribute("required","required"),p.innerText=b,i.append(p,r,E),i}function v(o,c){const d=document.createElement("div"),b=document.createElement("small");d.classList.add("flex","justify-between","p-3");for(let i=0;i<o.length;i++)d.appendChild(a(c,o[i],o[i],o[i]));return d.append(b),d}function a(o,c,d,b){let i=`passenger${o}Gender`;var p=document.createElement("div"),r=document.createElement("input");r.setAttribute("type","radio"),r.setAttribute("name",i),r.setAttribute("id",`${c.toLowerCase()}${o}`),r.setAttribute("value",d.toLowerCase()),r.setAttribute("required","required"),r.style.margin="6px";var E=document.createElement("label");return E.setAttribute("for",`${c.toLowerCase()}${o}`),E.textContent=b,p.append(r,E),p}}),f.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(f),s=Object.fromEntries(t),u=[];for(let a=0;a<6;a++)s[`passenger${a}Age`]&&s[`passenger${a}Gender`]&&s[`passenger${a}Name`]&&u.push({passengerAge:s[`passenger${a}Age`],passengerGender:s[`passenger${a}Gender`],passengerName:s[`passenger${a}Name`]});const l={trainNum:s.trainNum,toStation:s.toStation,fromStation:s.fromStation,dateOfJourney:s.dateOfJourney,passengersDetails:u},m=JSON.stringify(l);console.log("JSON BODY",m),(async(a,o)=>{await fetch(o,{method:"post",headers:{"Content-Type":"application/json"},body:a})})(m,"http://localhost:3000/tickets")}),f.addEventListener("input",e=>{e.preventDefault();const t=new FormData(f),s=Object.fromEntries(t);for(let u in s){const l=document.getElementById(u);if(l.id==u){let m=h(l.value.trim());n(m?"green":"red",l),console.log(m,l.id)}}});const h=e=>e!=="";function n(e,t){t.style.borderColor=e,t.style.borderWidth="2px"}});
