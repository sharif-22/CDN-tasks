(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const E=document.forms.ticketForm,L=document.querySelector("#addPassengers"),h=document.querySelector("#passengerList");document.querySelectorAll(".passenger");L.addEventListener("click",o=>{o.preventDefault();let e=h.children.length+1;const t=document.createElement("div"),l=p(e,`passenger${e}Name`,"text",`Enter passenger ${e} Name`),n=["Male","Female","Others"],s=p(e,`passenger${e}Age`,"number",`Enter passenger ${e} Age`);e<6?t.append(l,y(n,e),s):console.log("tickes solds upto 5 members only "),h.append(t);function p(a,d,u,g){const c=document.createElement("div"),f=document.createElement("label"),r=document.createElement("input"),b=document.createElement("small");return c.classList.add("flex","flex-col","gap-3"),r.classList.add("passenger","p-2"),u=="number"&&d==`passenger${a}Age`&&(r.setAttribute("min",0),r.setAttribute("max",110)),f.setAttribute("for",d),r.setAttribute("type",u),r.setAttribute("id",d),r.setAttribute("name",d),r.setAttribute("placeholder",`Enter Passenger ${a} Age `),r.setAttribute("required","required"),f.innerText=g,c.append(f,r,b),c}function y(a,d){const u=document.createElement("div"),g=document.createElement("small");u.classList.add("flex","justify-between","p-3");for(let c=0;c<a.length;c++)u.appendChild(i(d,a[c],a[c],a[c]));return u.append(g),u}function i(a,d,u,g){let c=`passenger${a}Gender`;var f=document.createElement("div"),r=document.createElement("input");r.setAttribute("type","radio"),r.setAttribute("name",c),r.setAttribute("id",`${d.toLowerCase()}${a}`),r.setAttribute("value",u.toLowerCase()),r.setAttribute("required","required"),r.style.margin="6px";var b=document.createElement("label");return b.setAttribute("for",`${d.toLowerCase()}${a}`),b.textContent=g,f.append(r,b),f}});E.addEventListener("submit",o=>{o.preventDefault();const e=new FormData(E),t=Object.fromEntries(e),l=[];for(let i=0;i<=5;i++)t[`passenger${i}Age`]&&t[`passenger${i}Gender`]&&t[`passenger${i}Name`]&&l.push({passengerAge:t[`passenger${i}Age`],passengerGender:t[`passenger${i}Gender`],passengerName:t[`passenger${i}Name`]});const s={trainNum:t.trainNum,toStation:t.toStation,fromStation:t.fromStation,dateOfJourney:t.dateOfJourney,passengersDetails:l};console.log(s),(async(i,a)=>{await fetch(a,{method:"post",headers:{"Content-Type":"application/json"},body:i})})(s,"http://localhost:3000/tickets")});E.addEventListener("change",o=>{const e=o.target,l=e.parentElement.querySelector("small");e.type=="text"?v(e.value)?(l.innerText="",m("green",e),$(e.value)?(m("green",e),l.innerText=""):(m("red",e),l.innerText="Enter Value is  not Valid!")):(m("red",e),e.value="",e.placeholder="input cannot be blank.",l.innerText="input cannot be blank."):e.type=="number"?A(e.value,1,110)||e.name=="trainNum"&&A(e.value,1,9999)?m("green",e):m("red",e):e.type=="date"&&(v(e.value)?m("green",e):m("red",e))});const v=o=>o.trim()!=="",$=o=>!(o.length<3),A=(o,e,t)=>!(o<e||o>t);function m(o,e){e.style.borderColor=o,e.style.borderWidth="2px"}document.querySelectorAll("input[type='radio']");
